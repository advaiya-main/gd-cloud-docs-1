<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>

<!--Article Number is __________ (fill in blank)-->

<!--Use this template for articles that explain or describe something (such as an operating system). For articles that include steps for accomplishing a task (for example, installing), use the Informational template instead.  -->


<title>Backup MySQL Databases on your server - Ubuntu, Debian</title>
<style type="text/css">
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}
</style>


<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:ArticleKeywords msdt:dt="string">MySQL, Backups</mso:ArticleKeywords>
<mso:Reference msdt:dt="string">https://www.digitalocean.com/community/tutorials/how-to-backup-mysql-databases-on-an-ubuntu-vps, https://www.digitalocean.com/community/tutorials/how-to-backup-mysql-databases-on-an-ubuntu-vps</mso:Reference>
<mso:LinuxDistributions msdt:dt="string">;#Ubuntu;#Debian;#</mso:LinuxDistributions>
<mso:ArticlePriority msdt:dt="string">1</mso:ArticlePriority>
<mso:RequestNotes msdt:dt="string"></mso:RequestNotes>
<mso:Difficulty msdt:dt="string">1</mso:Difficulty>
<mso:ForkSplit msdt:dt="string"></mso:ForkSplit>
<mso:ArticleID msdt:dt="string">17547</mso:ArticleID>
<mso:UnsupportedFeatures msdt:dt="string"></mso:UnsupportedFeatures>
<mso:Collapsed msdt:dt="string"></mso:Collapsed>
<mso:ArticleStatus msdt:dt="string">Not started</mso:ArticleStatus>
<mso:Complexity msdt:dt="string"></mso:Complexity>
<mso:Sample msdt:dt="string">z</mso:Sample>
<mso:HoursDraftingEstimated msdt:dt="string">1.50000000000000</mso:HoursDraftingEstimated>
<mso:HoursEditingEstimated msdt:dt="string">0.100000000000000</mso:HoursEditingEstimated>
<mso:DeliveryTarget msdt:dt="string">Phase 2</mso:DeliveryTarget>
<mso:EditScore msdt:dt="string"></mso:EditScore>

<mso:PrereqOrdering msdt:dt="string">2</mso:PrereqOrdering>
<mso:AssignedTo1 msdt:dt="string">12</mso:AssignedTo1>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_AssignedTo1 msdt:dt="string">Tom Taylor</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_AssignedTo1>
<mso:Week msdt:dt="string">8.00000000000000</mso:Week>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body>
<p>Backup MySQL Databases on your server - Ubuntu, Debian, MySQL, Backups</p>
    <h1>Backup MySQL databases on your server - Ubuntu, Debian</h1>
    
    <p><strong>Difficulty</strong>: <em>1</em><br/>
        <strong>Time</strong>: <em>30 minutes</em></p>

    <p>MySQL is one of the most popular database engines for storing data in database. MySQL uses SQL ie. Structured Query Language to retrieve and manipulate data. It can be used to manage data from websites or applications.</p>
    <p>Backup is useful to restore data against crashes of the system. In this article, you will learn some ways to take the backup from server. Here, you will use Ubuntu machine with MySQL installed. You can choose any version of MySQL, because operational commands remain similar.</p>
    
    <h2>Backup Database</h2>
<ol> 
<li>Export the database using <strong>mysqldump</strong> command. 
   <div class="hacker">sudo mysqldump –u mysql_username –p mysql_user_password database_name > back_database_date.sql</div>
   </li>
   </ol>
   
   <h2>Restore the database</h2>
   <ol>
   <li>Create a database if not created already.  
   <div class="hacker">mysql –u mysql_username –p</div>
   </li>
   <li>You will get a MySQL prompt, create a new database here to hold raw data.
   <div class="hacker">CREATE DATABASE database_name;</div>
   </li>
   <li>Exit or press ctrl+c.
   </li>
   <li>Import data in the created database.
   <div class="hacker">mysql –u mysql_username –p  database_name &lt; back_database_date.sql</div>
   <p>The data will be restored or dumped into database_name. </p>
   </li>
   </ol>
   
   <h2>Back up the table to a text file</h2>
   <ol>
   <li>Take the backup into the text file by using the following command:
   <div class="hacker">USE database_name;</div>
   <div class="hacker">SELECT * INTO OUTFILE 'table_backup_file' FROM name_of_table;</div>
   <p class="note">Use <strong>USE</strong> command to select or change the database.</p>
   </li>
  </ol>
  
  <h2>Auto-backup MySQL information</h2>
<ol> 
<li>To automatically perform data backups at regular intervals, there is a tool in Ubuntu/Debian - automybackup. Install automybackup using the following command.
   <div class="hacker">sudo apt-get install automysqlbackup</div>
   <div class="hacker">sudo automysqlbackup</div>
   </li>
   <li>Configuration file for automysqlback is located at <code>sudo nano /etc/default/automysqlbackup.</code>
   <p>Open this file using vim.</p> 
   <div class="hacker">sudo nano /etc/default/automysqlbackup</div>
   </li>
   <li>After opening, you will find <code>/etc/mysql/debian.conf </code>file, which has many variables. You can replace the file with your configuration file but before proceeding, you should take a backup of it.
   </li>
   <li>Automysqlbackup command takes the backup in <strong>/var/lib/automysqlbackup </strong>by default. To check the structure of backup, run the following command into the terminal.
   <div class="hacker">ls /var/lib/automysqlbackup</div>
   </li>
   <li>To verify the database backup, run the following command in the terminal:
   <div class="hacker">ls -R /var/lib/automysqlbackup/</div>
   </li>
  </ol>
  
  <h2>Backup using replication</h2>
  <p>It is possible to use MySQL replication to backup the data with the above techniques.</p>
  <p>While replication allows for data mirroring, it suffers when you are trying to save a specific point in time. This is because it is constantly replicating the changes of a dynamic system. To avoid this problem, you can either:</p>
  <ol>
  <li>Disable replication temporarily</li>
  <li>Make the backup machine read-only temporarily</li>  
  </ol>
  
  <h2>Disable replication temporarily</h2>
<ol> 
<li>Disable replication for the slave temporarily by using the following command:
   <div class="hacker">mysqladmin -u root -p stop-slave</div>
   </li>
   <li>Another option, which doesn't completely stop replication, but puts it on pause, can be accomplished by typing:
   <div class="hacker">mysql -u user_name -p -e 'STOP SLAVE SQL_THREAD;'</div>
   </li>
   </ol>
   
   <h2>Making the backup machine read-only temporarily</h2>
   <p>You can ensure a consistent set of data within the server by making the data read-only temporarily.</p>
   <p>You can perform these steps on either the master or the slave systems.</p>
   <ol>
   <li>Log into MySQL with enough privileges to manipulate the data.
   <div class="hacker">mysql -u root –p</div>
   </li>
   <li>You can write all of the cached changes to the disk and set the system read-only by typing:
   <div class="hacker">FLUSH TABLES WITH READ LOCK; </div>
   <div class="hacker">SET GLOBAL read_only = ON;</div>
   </li>
   <li>Perform your backup using <strong>mysqldump</strong>.
   </li>
   <li>After the backup is completed , return the system to its original working order by typing:
   <div class="hacker">SET GLOBAL read_only = OFF;</div>
   <div class="hacker">UNLOCK TABLES;</div>
   </li>
  </ol>
  
    <h2>Conclusion</h2>
    <p>In this, article you learned to backup MySQL Databases on your server – Ubuntu, Debian. </p>
   
</body>
</html>