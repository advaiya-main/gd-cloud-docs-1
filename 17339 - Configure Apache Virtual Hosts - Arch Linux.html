  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
  <head>
    <style>
div.hacker {
background-color:#666;
border:1px solid #ccc;
color:#fff;
font-family:"Lucida Console","Courier New",Courier,fixed;  font-size:95%;  line-height:160%;  margin-bottom:1.5em;  padding:10px; }

p.note {
 background-color:#ffffe6;
 border:1px solid #eee;
 color:#666;
 padding:.8em 1.6em;
 margin:15px 0;
}

.warning {
 border: 1px #d25100 solid;
 padding: .5em 1em .5em 4em;
 margin: 10px 20px 15px 20px;
 background-image: url('@{help-img-path}/img_warning.gif');
 background-repeat: no-repeat;
 background-position: left top;
 background-color: #ededed;-moz-border-radius:
0.8em;-webkit-border-radius: 0.8em;
 /* -moz-border-bottom-radius: 0;9 */
 -webkit-border-bottom-radius: 0;
 padding-top:14px;
 padding-bottom:15px;
}
</style>
<title>Configure Apache Virtual Hosts - Arch Linux</title>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:Editor0 msdt:dt="string">Carla</mso:Editor0>
<mso:KpiDescription msdt:dt="string">Christine, I added comments via &lt;!--comment--!&gt; tags within the document. Can you take a look and address? Thanks! -Carla</mso:KpiDescription>
<mso:Last_x0020_updated msdt:dt="string">2015-07-09T00:00:00Z</mso:Last_x0020_updated>
<mso:Author0 msdt:dt="string">Christine</mso:Author0>
<mso:Dependency msdt:dt="string"></mso:Dependency>
<mso:ArticleKeywords msdt:dt="string">Apache, Setup, Virtual Host</mso:ArticleKeywords>
<mso:Complexity msdt:dt="string">3 - Somewhat complex</mso:Complexity>
<mso:Reference msdt:dt="string">https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-arch-linux, https://www.digitalocean.com/community/tutorials/how-to-set-up-apache-virtual-hosts-on-arch-linux</mso:Reference>
<mso:ArticleStatus msdt:dt="string">Tested and needs revision</mso:ArticleStatus>
<mso:HoursEditingEstimated msdt:dt="string">0.750000000000000</mso:HoursEditingEstimated>
<mso:Dependencies msdt:dt="string"></mso:Dependencies>
<mso:ArticlePriority msdt:dt="string">1</mso:ArticlePriority>
<mso:AssignedTo1 msdt:dt="string">27</mso:AssignedTo1>
<mso:HoursDraftingEstimated msdt:dt="string">3.00000000000000</mso:HoursDraftingEstimated>
<mso:RequestNotes msdt:dt="string">Prereq: - 'Initial Server Setup'' 'Build a LAMP stack.' FQDN pointed at server. Include simple instructions for installing Apache for those who do not want full LAMP.</mso:RequestNotes>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_AssignedTo1 msdt:dt="string">Christine Tzeng</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_AssignedTo1>
<mso:DeliveryTarget msdt:dt="string">Phase 2</mso:DeliveryTarget>
<mso:EditScore msdt:dt="string"></mso:EditScore>
<mso:Difficulty msdt:dt="string">2</mso:Difficulty>
<mso:ForkSplit msdt:dt="string"></mso:ForkSplit>
<mso:HoursDraftingActual msdt:dt="string">3.00000000000000</mso:HoursDraftingActual>
<mso:ArticleID msdt:dt="string">17339</mso:ArticleID>
<mso:UnsupportedFeatures msdt:dt="string"></mso:UnsupportedFeatures>
<mso:Collapsed0 msdt:dt="string"></mso:Collapsed0>
<mso:PercentResearch msdt:dt="string">0.250000000000000</mso:PercentResearch>
<mso:PercentWriting msdt:dt="string">0.750000000000000</mso:PercentWriting>
<mso:Week msdt:dt="string">10.0000000000000</mso:Week>
<mso:LinuxDistributions msdt:dt="string">;#Arch Linux;#</mso:LinuxDistributions>
<mso:ReviewComments msdt:dt="string">Christine, the doc is returning 88 errors in the XHTML validator. Can you correct and then send back to Ready to Edit? Thanks! -Carla</mso:ReviewComments>
<mso:PrereqOrdering msdt:dt="string">2</mso:PrereqOrdering>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_ReviewedBy msdt:dt="string">Carla  Johnson</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_ReviewedBy>
<mso:AssignmentAction msdt:dt="string"></mso:AssignmentAction>
<mso:ReviewedBy msdt:dt="string">41</mso:ReviewedBy>
<mso:TestComments msdt:dt="string">Needs Vim instead of nano 
fails in creating a page for first virtual host while saving the &lt;html&gt;
&quot;/srv/http/&quot;
&quot;/srv/http/&quot; E212: Can't open file for writing
Press ENTER or type command to continue
</mso:TestComments>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Tester msdt:dt="string">Prabhu Mouli</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Tester>
<mso:Tester msdt:dt="string">20</mso:Tester>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
  <body>
  
 <!--CT: Rewritten 9/11-->

   <p>Configure Apache Virtual Hosts Setup on Arch Linux.</p>

    <h1>Configure Apache Virtual Hosts - Arch Linux</h1>
    
    <p><strong>Difficulty</strong>: <em><u>2</u></em><br />
        <strong>Time</strong>: <em><u>15 minutes</u></em></p>
    
    <p>To run multiple sites on a single IP address, you'll need to set up the virtual hosts in your web browser. Apache is the most commonly-used web server and can run a multitude of content based on IP address or hostname.</p>

    <p>This guide will walk you through how to set up an Apache virtual host on an Arch Linux virtual private server (VPS) as a non-root user with <code>sudo</code> privileges.</p>
    
    <p class="note">If you need the full LAMP stack (Linux, Apache, MySQL, and PHP), see <a href="https://blueprintcs.sharepoint.com/sites/gdcmp/Articles/17341%20-Build%20a%20LAMP%20stack%20(Linux,%20Apache,%20MySQL,%20PHP)%20-%20Arch Linux.html">Build a LAMP stack (Linux, Apache, MySQL, PHP) - Arch Linux</a> for instructions.

    <p>Also, make sure your hostname has a valid DNS record, so that the www version of your domain works. See <a href="/article/19116?prog_id=PROG_ID">Point your domain to a GoDaddy Cloud Server</a> for instructions on setting up your domain.</p>
    
    <li> </p>
    
    <h2>Install the Apache web server</h2>
    <ol>
 <!--CT...<li>Update your packages using <code>pacmman</code>.
      <div class="hacker">sudo pacman update</div></li>
      ...-->

    <li>Install Apache.
      <div class="hacker">sudo pacman -Syu apache</div></li>
    
   </ol> 
   
    <h2>Set up the virtual host</h2>
    <ol>
    <li>Create the virtual directories for the domains/sites you'll be serving from your VPS.
    For this tutorial, we will use the example domain name <em><u>coolexample.com</u></em>.<br />
    <div class="hacker">
    sudo mkdir -p /srv/http/<em><u>coolexample.com</u></em></div></li>
    
        
    <h2>Create a sample page for your virtual host</h2>
    
    <ol>
    <li>Create a sample page for your virtual host. 
    <div class="hacker">sudo vim /srv/http/<em><u>coolexample.com</u></em>/index.html</div>

    It'll be a blank file. Add some content: 
        <div class="hacker"><pre>&lt;html&gt; 
    &lt;head&gt; 
    &lt;title&gt;Welcome to coolexample.com!&lt;/title&gt; 
    &lt;/head&gt; 
    &lt;body&gt; 
    &lt;h1&gt;Hooray! Your coolexample.com virtual host is working!&lt;/h1&gt; 
    &lt;/body&gt; 
&lt;/html&gt;</pre></div></li>
    <li>Save and close the file.</li>
</ol>

<h2>Allow for virtual hosts/h2>

<p>Enable virtual hosts by making a quick change in the Apache config file.</p>

<ol>
  <li>Open the file to edit.
     <div class="hacker">  sudo nano /etc/httpd/conf/httpd.conf</div>
</li>

   <li>Find this line below and uncomment it. 
        <div class="hacker">Include conf/extra/httpd-vhosts.conf</div></li>
    
    <li>Save and close.</li>
</ol>


<h2>Configure your virtual host</h2>
 
<ol>

  <li>Open the virtual hosts file.
     <div class="hacker">sudo nano /etc/httpd/conf/extra/httpd-vhosts.conf</div>
  </li>
  
    <li>Open your newly-copied config file.
        <div class="hacker">sudo vim /etc/apache2/sites-available/coolexample.com.conf</div></li>

<li>In the file, replace the 1st virtual host example with your own domain information. These lines below are the ones that need updating : 

 <div class="hacker"><pre>&lt;VirtualHost *:80&gt;
   
    DocumentRoot "<em><u>/var/www/coolexample.com/public_html</u></em>"" 
    ServerName <em><u>www.coolexample.com</u></em>     
    ServerAlias <em><u>coolexample.com</u></em> 
    ErrorLog /var/www/coolexample.com/error.log 
    CustomLog /var/www/coolexample.com/requests.log combined 

&lt;/VirtualHost&gt; 
  </pre></div>

 <p>Don't forget the quote marks "" around the DocumentRoot directory.</p>

  <p>Note that updating the lines ServerAdmin, ErrorLog and CustomLog are not required to set up your virtual host, but you can go ahead and update ErrorLog and CustomLog to your domain and ServerAdmin to your email.</p>
 </li>

 <li>Save and close.</li>

<li>Run a config test to check your changes.
  <div class="hacker">apachectl configtest</div>
</li>

</ol>


<h2>Put your domain name in the hosts file</h2>

If you're using fully qualified domain names (FQDNs), put your domain name after the IP address in the <code>/etc/hosts</code> file. 

<ol>
<li>Open the file. 
 <div class="hacker">sudo vim /etc/hosts</div></li>

 <li>Fill in our domain information for the first IP. Your changes might look something like this:

  <div class="hacker"><pre>  
#&lt;ip-address&gt;  &lt;hostname.domain.org&gt;   &lt;hostname&gt; 
127.0.0.1         <em><u>coolexample.com</u></em>   <em><u>your host name (optional)</u></em>
::1             localhost.localdomain   localhost

</pre></div>

 </li>

<h2>Enable your virtual host</h2>

<ol>
<li>Enable your virtual host file using <code>a2ensite</code>.
    <div class="hacker">sudo a2ensite coolexample.com.conf</div></li>


<li>Restart Apache.
 <div class="hacker">sudo service apache2 restart</div></li>

</ol>
 
 <h2>Test your setup</h2>

 <p>See your virtual host in action by typing in your domain or IP address into your browser, such as <em><u>coolexample.com</u></em>. You should see your test page created earlier.</p>

<p class="note">You can test your virtual host locally by setting up local hosts on your computer alone. This is a good option if you have not yet pointed your domain name to the IP address of your VPS. See <a href="https://blueprintcs.sharepoint.com/sites/gdcmp/Articles/00003 - Set up Local Hosts to Test Virtual Host Setup - ALL DISTROS.html"> Set up Local Hosts to Test Virtual Host Setup - ALL DISTROS</a> for more on how to do this.</p> 
      

<h2>Adding additional virtual hosts</h2>

<p>Repeat the above steps to create more virtual hosts. Be sure to create new config files for each new virtual host. You can copy the <em><u>coolexample.com</u></em> confige file to create new hosts.</p>


<h2>Next Steps</h2>
<p>Congratulations! You now have a single server handling a site with its own domain. Again, remember that you can add additional virtual hosts since there is no limit on the number of domain names Apache can handle.</p>

  </body>
</html>